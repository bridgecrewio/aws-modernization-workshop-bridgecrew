<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.80.0"><meta name=description content="learn how to automate your cloud infrastructure security from code to cloud with Bridgecrew"><meta name=author content="Matt Johnson @ Bridgecrew"><link rel=icon href=/images/favicon.png type=image/png><title>AWS CodePipeline Setup :: Cloud DevSecOps workshop with Bridgecrew</title><link href=/css/nucleus.css?1612885189 rel=stylesheet><link href=/css/fontawesome-all.min.css?1612885189 rel=stylesheet><link href=/css/hybrid.css?1612885189 rel=stylesheet><link href=/css/featherlight.min.css?1612885189 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1612885189 rel=stylesheet><link href=/css/auto-complete.css?1612885189 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1612885189 rel=stylesheet><link href=/css/theme.css?1612885189 rel=stylesheet><link href=/css/hugo-theme.css?1612885189 rel=stylesheet><link href=/css/theme-mine.css?1612885189 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1612885189></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/20_module_two/2004_automating_iac_codepipeline.html><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a href=/ title="Bridgecrew Workshop home"><img class=login-step-container__logo__29R6Z src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJsAAAAeCAMAAAAMwpzVAAABF1BMVEUAAAAwIX1IIdEwIX0wIX0wIX0wIX0wIX0zIYgwIX0wIX0wIX0wIX1IIdFIIdEwIX1IIdEwIX0wIX0wIX0wIX1IIdFIIdFIIdFIIdEwIX0wIX0wIX1IIdEwIX1IIdEwIX0wIX0wIX1IIdEwIX1IIdFIIdEwIX1IIdEwIX0wIX0wIX1IIdEwIX1IIdEwIX0wIX0wIX1IIdEwIX1IIdFIIdFIIdEwIX1IIdFIIdFIIdEwIX0wIX0wIX0wIX0wIX0wIX1IIdEwIX1IIdEwIX1IIdFIIdEwIX1IIdFIIdEwIX1IIdEwIX1IIdEwIX1IIdFIIdFIIdEwIX0wIX0wIX1IIdFIIdEwIX1IIdFIIdFIIdEwIX0wIX1IIdGWaYNeAAAAW3RSTlMA8vP94qYcCQXnVTkUDYZ7eTC5sYGAXlQ21sGRfGJNQPjr383MUK2ZmIyGQzcaGA7axLSUinZGLfnmyJ2TWlFNRx8G7uzX0rmnoqB1b29XJxMrJyKyjWtLIu5KQIFbfQAABMVJREFUWMPNlmlTGkEQhnuBDbcoQUQQUUEE5PAABDwANSooeB/J8v9/R7p7ZphFjFWpVCzeD25vz+A89DWA1zDS8BcKG4bLDV8jy7LW4TO1K2DXBX7gq9gMy9qBT3T4jiSO32VG2ArWGbxn83rgY30tWwJJZpXtoRwITLG5vpAtDe6TUCHksxV94DiSKIRScP/4KNnc7WvcEoA9ZAOh1CByjR6b/C+FSPLe7ilFV+ZqHVB6rT1X52/IuhviwuopsE6DwaBnymC2iNcinRVAKrLGDj91cYs9IbHFiMQVW3JHeI7c445OW6zwgvLc9Rsj0gbjwHCD3/oAwX0Hm80akGoOh2OTjHk0OtLTJDat5S6Qvos3E8r4dw8dlZZ9l4v36FeJktA7ksCKnY+Udj0AN8JsAhxs6IUgbpxDIwqoKhpLID3MprVeoRgJ23BD12lZ39GzY71nC9vend8kmtYxeW5HWvNIKs1tKDVsKz9w54pCWkRjlQM4Gjkkm+krnpiWiJLbSXnxFcsA3wRbjlayx8X2oWIb0DOeTLV56YKKj42BPxVaJovKkIOz34lFd0dDfN3l5MYOADK0sLUaG141aMfnbD4gnZC5wI8wvSu2sk5TXbB56BES5b8mwkREpujtMzRzAFE8pxFj1wHVHr6eB+ltW0SPtEVm6TM27gGZzCMo4N+6nS3EZwm9MJuPIyzUpgjCg6rDX6aLaJ0euMRzXoGliLbYepLV9VbL/CS2uU/YDM/EQMlT9DRbFuKcIykvzcMj9BSBxREzmLYO/oTLkurCT6olrU08dpGtJi3cRYmd9QTzH7OdEY5Si66BCB2s2Uy4kCFRPbwMWJprbuWhIoQkhioXV2A7eb+nxHGaZJsjI4jjI8MzhHUZ/WNOL+gsWwhczOa3s6XtP1Xiiq2iPCaxHVtjGb02uYnt6iO20zEWMs6/wZ/7tIdfuAtCZSd1QX6SLQtZnWSoYDG1eMsJSK0TW1GR7SVV+jew9j9igx8SbOOZOuU90ohn7w2xJXVXwh7a15CYZPvOMUnbgpSDX5aOdoSIKsARy750qZkFdh/PqX7Ets8R2+dOjXLn1tAxVLN3VRoNMc0OKxQSnl6BaTYPNV6WwuHO05Z77ggrzCP32iJ94+B6Obo+/MyJR87aFR4hixNsbyNViqWn0fnKLUCHLgiaM01plM6JDZJ8lfbyvXWLwzbNJorJMPOHXjKO1KRdMwuJZYv1SEOQePOJNP8/av0rTtxWFZ+XdjZ45oX+8xVXXlSWYGZxDtHYqJ5LxpyllYVptndbwjqTWg+AedYy7oGUsd9M24qNrwitfU7taFqxyXPy9HpkY+MZq69YjprQQN/Bgg3qLuVJPwKLI8dqVKGj2eg+UFoBVYMsR18t3ABrwfTSGaaYaj20U8Dqjn8j3ffUFqUAZ3gtXDSx07k33aFl8rSSMNbrpYPz+iZCo+fd9hNdCc3+rXJEuXsvb+GVo53pgJJ7IbXgBknq8/kC0o2mX7o9esvYU0+VAQzbaH5M+dFj111s+4CN0tLSkCylIC6cgk2xpU1BekDGvyjklfxZTvQMyTPAYNWpIk0xQmZIYmJc7MWd9BzATClpaeVgxjSeGM5rmDl5XsIuY70V6cL/0m9KZOlx6ZHWLwAAAABJRU5ErkJggg==" alt=logo></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1612885189></script><script type=text/javascript src=/js/auto-complete.js?1612885189></script><script type=text/javascript>var baseurl="\/";</script><script type=text/javascript src=/js/search.js?1612885189></script></div><section id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i>Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/5_getting_started.html title=DevSecWhat? class=dd-item><a href=/5_getting_started.html><b>1 </b>DevSecWhat?
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5b_what_cloudformation.html title="CloudFormation Overview" class=dd-item><a href=/5b_what_cloudformation.html><b>2 </b>CloudFormation Overview
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/6_prerequisites.html title=Prerequisites class=dd-item><a href=/6_prerequisites.html><b>3 </b>Prerequisites
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/6_prerequisites/7_aws_setup.html title="AWS Environment" class=dd-item><a href=/6_prerequisites/7_aws_setup.html><b>3.1 </b>AWS Environment
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/6_prerequisites/7_aws_setup/8_aws_eventengine.html title="At an AWS Event" class=dd-item><a href=/6_prerequisites/7_aws_setup/8_aws_eventengine.html><b>3.2.1 </b>At an AWS Event
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/6_prerequisites/7_aws_setup/8_aws_eventengine/workspace.html title="Create a workspace" class=dd-item><a href=/6_prerequisites/7_aws_setup/8_aws_eventengine/workspace.html><b>3.2.1.1 </b>Create a workspace
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/6_prerequisites/7_aws_setup/8_aws_eventengine/setup_short.html title="Quick Setup" class=dd-item><a href=/6_prerequisites/7_aws_setup/8_aws_eventengine/setup_short.html><b>3.2.1.5 </b>Quick Setup
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/6_prerequisites/7_aws_setup/9_own_account.html title="Own AWS Account" class=dd-item><a href=/6_prerequisites/7_aws_setup/9_own_account.html><b>3.2.2 </b>Own AWS Account
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/6_prerequisites/7_aws_setup/9_own_account/workspace.html title="Create a workspace" class=dd-item><a href=/6_prerequisites/7_aws_setup/9_own_account/workspace.html><b>3.2.2.1 </b>Create a workspace
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/6_prerequisites/601_setting_up_bridgecrew_account.html title="Bridgecrew Setup" class=dd-item><a href=/6_prerequisites/601_setting_up_bridgecrew_account.html><b>3.2 </b>Bridgecrew Setup
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/10_module_one.html title="Module - Scan" class=dd-item><a href=/10_module_one.html><b>4 </b>Module - Scan
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/10_module_one/1001_cfngoat.html title=CfnGoat class=dd-item><a href=/10_module_one/1001_cfngoat.html><b>4.1 </b>CfnGoat
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/10_module_one/1002_local_scan_cli.html title="Bridgecrew CLI" class=dd-item><a href=/10_module_one/1002_local_scan_cli.html><b>4.2 </b>Bridgecrew CLI
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/10_module_one/1003_vscode.html title="VSCode Plugin" class=dd-item><a href=/10_module_one/1003_vscode.html><b>4.3 </b>VSCode Plugin
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/10_module_one/1004_local_scan_dashboard.html title="Bridgecrew Dashboard" class=dd-item><a href=/10_module_one/1004_local_scan_dashboard.html><b>4.4 </b>Bridgecrew Dashboard
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/20_module_two.html title="Module - Automate" class="dd-item
parent"><a href=/20_module_two.html><b>5 </b>Module - Automate
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/20_module_two/2001_automating_iac_github.html title="CloudFormation repository setup" class=dd-item><a href=/20_module_two/2001_automating_iac_github.html><b>5.1 </b>CloudFormation repository setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/20_module_two/2002_automating_iac_codebuild.html title="AWS CodeBuild setup" class=dd-item><a href=/20_module_two/2002_automating_iac_codebuild.html><b>5.2 </b>AWS CodeBuild setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/20_module_two/2003_automating_iac_codebuild_iam.html title="Edit IAM for CodeBuild" class=dd-item><a href=/20_module_two/2003_automating_iac_codebuild_iam.html><b>5.3 </b>Edit IAM for CodeBuild
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/20_module_two/2004_automating_iac_codepipeline.html title="AWS CodePipeline Setup" class="dd-item active"><a href=/20_module_two/2004_automating_iac_codepipeline.html><b>5.4 </b>AWS CodePipeline Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/20_module_two/2005_automating_iac_results.html title="Pipeline Results" class=dd-item><a href=/20_module_two/2005_automating_iac_results.html><b>5.5 </b>Pipeline Results
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/20_module_two/2006_automating_iac_github_actions.html title="GitHub Actions" class=dd-item><a href=/20_module_two/2006_automating_iac_github_actions.html><b>5.6 </b>GitHub Actions
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/30_module_three.html title="Module - Fix" class=dd-item><a href=/30_module_three.html><b>6 </b>Module - Fix
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/30_module_three/3001_bridgecrew_dashboard_results.html title="Bridgecrew platform results" class=dd-item><a href=/30_module_three/3001_bridgecrew_dashboard_results.html><b>6.1 </b>Bridgecrew platform results
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/30_module_three/3002_bridgecrew_automate_integrate_github.html title="GitHub integration" class=dd-item><a href=/30_module_three/3002_bridgecrew_automate_integrate_github.html><b>6.2 </b>GitHub integration
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/30_module_three/3003_bridgecrew_automate_pr_remediation.html title="Pull request fixes" class=dd-item><a href=/30_module_three/3003_bridgecrew_automate_pr_remediation.html><b>6.3 </b>Pull request fixes
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/30_module_three/3004_bridgecrew_automate_add_runtime.html title="AWS runtime scanning" class=dd-item><a href=/30_module_three/3004_bridgecrew_automate_add_runtime.html><b>6.4 </b>AWS runtime scanning
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/30_module_three/3005_bridgecrew_automate_fix_runtime.html title="AWS fixes in runtime" class=dd-item><a href=/30_module_three/3005_bridgecrew_automate_fix_runtime.html><b>6.5 </b>AWS fixes in runtime
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/40_conclusion.html title=Conclusion class=dd-item><a href=/40_conclusion.html><b>7 </b>Conclusion
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/100_cleanup.html title=Cleanup class=dd-item><a href=/100_cleanup.html><b>8 </b>Cleanup
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href="https://bridgecrew.io/platform/?utm_source=workshop.bridgecrew.io&utm_medium=workshop&utm_campaign=workshop"><i class="fas fa-tools"></i>Platform</a></li><li><a class=padding href="https://docs.bridgecrew.io?utm_source=workshop.bridgecrew.io&utm_medium=workshop&utm_campaign=workshop"><i class="far fa-lightbulb"></i>Docs</a></li><li><a class=padding href="https://bridgecrew.io/blog/?utm_source=workshop.bridgecrew.io&utm_medium=workshop&utm_campaign=workshop"><i class="fas fa-chalkboard-teacher"></i>Blog</a></li><li><a class=padding href="https://www.bridgecrew.cloud/login/signUp?utm_source=workshop.bridgecrew.io&utm_medium=workshop&utm_campaign=workshop"><i class="fas fa-chalkboard-teacher"></i>Sign up</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i>Clear History</a></li></ul></section><section id=footer><left><a href=https://bridgecrew.io/privacy-policy/>Privacy</a> | <a href=https://bridgecrew.io/terms-of-use/>Site Terms</a> | © 2020, Bridgecrew, Inc. or its
affiliates. All rights reserved.</left></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span class=links><a href=/>Cloud DevSecOps with Bridgecrew</a> > <a href=/20_module_two.html>Module - Automate</a> > AWS CodePipeline Setup</span></div></div></div><div id=head-tags></div><div id=chapter><div id=body-inner><h2 id=setting-up-aws-codepipeline-to-automatically-trigger-scans>Setting up AWS CodePipeline to automatically trigger scans</h2><p>To trigger CodeBuild to run the scan automatically on each new commit in your CfnGoat GitHub repository, we’ll need to configure AWS CodePipeline. You can skip this step, but if you do, you’ll only be able to run manual scans from the CodeBuild UI, AWS CLI, or APIs, which doesn’t provide the DevSecOps automation we’re looking for!</p><p>To set it up, go to <a href=https://console.aws.amazon.com/codesuite/codepipeline/ target=_blank>AWS CodePipeline</a> and select <strong>Create Pipeline</strong>:</p><p><img src=./images/codepipeline-create-project-github-1.png alt="AWS CodePipeline" title="AWS CodePipeline"></p><p>After giving the pipeline a name, (<code>scan-cfngoat-pipeline</code>) select <strong>Next</strong>.</p><p><img src=./images/codepipeline-create-project-github-2.png alt="AWS CodePipeline Setup" title="AWS CodePipeline Setup"></p><p>Choose <strong>Github (Version 2)</strong> as the <strong>source provider</strong>.</p><p><img src=./images/codepipeline-create-project-github-3.png alt="AWS CodePipeline Setup" title="AWS CodePipeline Setup"></p><p>As CodeBuild and CodePipeline are different tools, you&rsquo;ll also need to authorize CodePipeline to your GitHub account, select <strong>Connect to Github</strong> and follow the authorization redirects in the popup window.</p><p>Give the Github Connection a name:</p><p><img src=./images/codepipeline-create-project-github-4.png alt="AWS CodePipeline Github Connection" title="AWS CodePipeline Github Connection"></p><p><img src=./images/codepipeline-create-project-github-5.png alt="AWS CodePipeline Github Authorize" title="AWS CodePipeline Github Authorize"></p><p>Select which Github Repositories you want CodePipeline to receive events for, in this case, i&rsquo;ve just selected the <code>CfnGoat</code> repository.</p><p><img src=./images/codepipeline-create-project-github-6.png alt="AWS CodePipeline Github Authorize" title="AWS CodePipeline Github Authorize">
<img src=./images/codepipeline-create-project-github-7.png alt="AWS CodePipeline Github Authorize" title="AWS CodePipeline Github Authorize"></p><p>Once you’ve authorized GitHub, select <strong>Install a new app</strong> to finalize the GitHub integration and select <strong>Connect</strong>:</p><p><img src=./images/codepipeline-create-project-github-8.png alt="AWS CodePipeline Github Authorize" title="AWS CodePipeline Github Authorize"></p><p>The CodePipeline screen should refresh with a green <strong>Sucessfully connected to GitHub</strong> message:</p><p><img src=./images/codepipeline-create-project-github-9.png alt="AWS CodePipeline Github connected OK" title="AWS CodePipeline Github connected OK"></p><p>Now that CodePipeline has access to our GitHub repository, we can select it as the pipeline source. Select the <strong>master</strong> (or <strong>main</strong> branch) to have our pipeline run when commits to this branch occur:</p><p><img src=./images/codepipeline-create-project-github-10.png alt="AWS CodePipeline Select Repo" title="AWS CodePipeline Select Repo"></p><h2 id=instruct-codepipeline-to-trigger-our-codebuild>Instruct CodePipeline to trigger our CodeBuild</h2><p>When CodePipeline sees a new commit in our GitHub repository, it will trigger a build action. To set this to be our CodeBuild commands, select the same region as the CodeBuild project, then select the CodeBuild project, <strong>bridgecrew-tutorial</strong>.</p><p>Leave the default of <strong>Single Build</strong> selected and select <strong>Next</strong></p><p><img src=./images/codepipeline-create-project-github-11.png alt="AWS CodePipeline Select Repo" title="AWS CodePipeline Select Repo"></p><p>On the next screen, select <strong>Skip deploy stage</strong>. We don’t want to deploy our CfnGoat CloudFormation to AWS as we’re just highlighting how to stop a build from progressing if there are security violations!</p><p><img src=./images/codepipeline-create-project-github-12.png alt="AWS CodePipeline Select Repo" title="AWS CodePipeline Select Repo"></p><p>Finally, select <strong>Create pipeline</strong> on the review page, which will trigger your new CodePipeline to immediately run against the latest commit in our CfnGoat repository:</p><p><img src=./images/codepipeline-create-project-github-13.png alt="AWS CodePipeline Select Repo" title="AWS CodePipeline Select Repo"></p><p><strong>Now we don’t need to manually run the Bridgecrew CLI; your developers will get a Bridgecrew scan every time they commit!</strong></p><footer class=footline></footer></div></div></div><div id=navigation><a class="nav nav-prev" href=/20_module_two/2003_automating_iac_codebuild_iam.html title="Edit IAM for CodeBuild"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/20_module_two/2005_automating_iac_results.html title="Pipeline Results" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1612885189></script><script src=/js/perfect-scrollbar.min.js?1612885189></script><script src=/js/perfect-scrollbar.jquery.min.js?1612885189></script><script src=/js/jquery.sticky.js?1612885189></script><script src=/js/featherlight.min.js?1612885189></script><script src=/js/highlight.pack.js?1612885189></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1612885189></script><script src=/js/learn.js?1612885189></script><script src=/js/hugo-learn.js?1612885189></script><script src=/mermaid/mermaid.js?1612885189></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>