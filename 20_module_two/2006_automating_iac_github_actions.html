<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.83.1"><meta name=description content="learn how to automate your cloud infrastructure security from code to cloud with Bridgecrew"><meta name=author content="Matt Johnson @ Bridgecrew"><link rel=icon href=/images/favicon.png type=image/png><title>GitHub Actions :: Cloud DevSecOps workshop with Bridgecrew</title><link href=/css/nucleus.css?1625063575 rel=stylesheet><link href=/css/fontawesome-all.min.css?1625063575 rel=stylesheet><link href=/css/hybrid.css?1625063575 rel=stylesheet><link href=/css/featherlight.min.css?1625063575 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1625063575 rel=stylesheet><link href=/css/auto-complete.css?1625063575 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1625063575 rel=stylesheet><link href=/css/theme.css?1625063575 rel=stylesheet><link href=/css/tabs.css?1625063575 rel=stylesheet><link href=/css/hugo-theme.css?1625063575 rel=stylesheet><link href=/css/theme-mine.css?1625063575 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1625063575></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/20_module_two/2006_automating_iac_github_actions.html><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a href=/ title="Bridgecrew Workshop home"><img class=login-step-container__logo__29R6Z src="data:image/png;base64,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" alt=logo></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1625063575></script><script type=text/javascript src=/js/auto-complete.js?1625063575></script><script type=text/javascript>var baseurl="/"</script><script type=text/javascript src=/js/search.js?1625063575></script></div><section id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/5_getting_started.html title=DevSecWhat? class=dd-item><a href=/5_getting_started.html><b>1 </b>DevSecWhat?
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5b_what_cloudformation.html title="CloudFormation Overview" class=dd-item><a href=/5b_what_cloudformation.html><b>2 </b>CloudFormation Overview
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/6_prerequisites.html title=Prerequisites class=dd-item><a href=/6_prerequisites.html><b>3 </b>Prerequisites
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/6_prerequisites/7_aws_setup.html title="AWS Environment" class=dd-item><a href=/6_prerequisites/7_aws_setup.html><b>3.1 </b>AWS Environment
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/6_prerequisites/7_aws_setup/8_aws_eventengine.html title="At an AWS Event" class=dd-item><a href=/6_prerequisites/7_aws_setup/8_aws_eventengine.html><b>3.2.1 </b>At an AWS Event
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/6_prerequisites/7_aws_setup/8_aws_eventengine/workspace.html title="Create a workspace" class=dd-item><a href=/6_prerequisites/7_aws_setup/8_aws_eventengine/workspace.html><b>3.2.1.1 </b>Create a workspace
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/6_prerequisites/7_aws_setup/8_aws_eventengine/setup_short.html title="Quick Setup" class=dd-item><a href=/6_prerequisites/7_aws_setup/8_aws_eventengine/setup_short.html><b>3.2.1.5 </b>Quick Setup
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/6_prerequisites/7_aws_setup/9_own_account.html title="Own AWS Account" class=dd-item><a href=/6_prerequisites/7_aws_setup/9_own_account.html><b>3.2.2 </b>Own AWS Account
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/6_prerequisites/7_aws_setup/9_own_account/workspace.html title="Create a workspace" class=dd-item><a href=/6_prerequisites/7_aws_setup/9_own_account/workspace.html><b>3.2.2.1 </b>Create a workspace
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/6_prerequisites/601_setting_up_bridgecrew_account.html title="Bridgecrew Setup" class=dd-item><a href=/6_prerequisites/601_setting_up_bridgecrew_account.html><b>3.2 </b>Bridgecrew Setup
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/10_module_one.html title="Module - Scan" class=dd-item><a href=/10_module_one.html><b>4 </b>Module - Scan
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/10_module_one/1001_cfngoat.html title=CfnGoat class=dd-item><a href=/10_module_one/1001_cfngoat.html><b>4.1 </b>CfnGoat
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/10_module_one/1002_local_scan_cli.html title="Bridgecrew CLI" class=dd-item><a href=/10_module_one/1002_local_scan_cli.html><b>4.2 </b>Bridgecrew CLI
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/10_module_one/1003_vscode.html title="VSCode Plugin" class=dd-item><a href=/10_module_one/1003_vscode.html><b>4.3 </b>VSCode Plugin
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/10_module_one/1004_local_scan_dashboard.html title="Bridgecrew Dashboard" class=dd-item><a href=/10_module_one/1004_local_scan_dashboard.html><b>4.4 </b>Bridgecrew Dashboard
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/20_module_two.html title="Module - Automate" class="dd-item
parent"><a href=/20_module_two.html><b>5 </b>Module - Automate
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/20_module_two/2001_automating_iac_github.html title="CloudFormation repository setup" class=dd-item><a href=/20_module_two/2001_automating_iac_github.html><b>5.1 </b>CloudFormation repository setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/20_module_two/2002_automating_iac_codebuild.html title="AWS CodeBuild setup" class=dd-item><a href=/20_module_two/2002_automating_iac_codebuild.html><b>5.2 </b>AWS CodeBuild setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/20_module_two/2003_automating_iac_codebuild_iam.html title="Edit IAM for CodeBuild" class=dd-item><a href=/20_module_two/2003_automating_iac_codebuild_iam.html><b>5.3 </b>Edit IAM for CodeBuild
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/20_module_two/2004_automating_iac_codepipeline.html title="AWS CodePipeline Setup" class=dd-item><a href=/20_module_two/2004_automating_iac_codepipeline.html><b>5.4 </b>AWS CodePipeline Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/20_module_two/2005_automating_iac_results.html title="Pipeline Results" class=dd-item><a href=/20_module_two/2005_automating_iac_results.html><b>5.5 </b>Pipeline Results
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/20_module_two/2006_automating_iac_github_actions.html title="GitHub Actions" class="dd-item active"><a href=/20_module_two/2006_automating_iac_github_actions.html><b>5.6 </b>GitHub Actions
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/30_module_three.html title="Module - Fix" class=dd-item><a href=/30_module_three.html><b>6 </b>Module - Fix
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/30_module_three/3001_bridgecrew_dashboard_results.html title="Bridgecrew platform results" class=dd-item><a href=/30_module_three/3001_bridgecrew_dashboard_results.html><b>6.1 </b>Bridgecrew platform results
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/30_module_three/3002_bridgecrew_automate_integrate_github.html title="GitHub integration" class=dd-item><a href=/30_module_three/3002_bridgecrew_automate_integrate_github.html><b>6.2 </b>GitHub integration
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/30_module_three/3003_bridgecrew_automate_pr_remediation.html title="Pull request fixes" class=dd-item><a href=/30_module_three/3003_bridgecrew_automate_pr_remediation.html><b>6.3 </b>Pull request fixes
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/30_module_three/3004_bridgecrew_automate_add_runtime.html title="AWS runtime scanning" class=dd-item><a href=/30_module_three/3004_bridgecrew_automate_add_runtime.html><b>6.4 </b>AWS runtime scanning
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/30_module_three/3005_bridgecrew_automate_fix_runtime.html title="AWS fixes in runtime" class=dd-item><a href=/30_module_three/3005_bridgecrew_automate_fix_runtime.html><b>6.5 </b>AWS fixes in runtime
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/40_conclusion.html title=Conclusion class=dd-item><a href=/40_conclusion.html><b>7 </b>Conclusion
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/100_cleanup.html title=Cleanup class=dd-item><a href=/100_cleanup.html><b>8 </b>Cleanup
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href="https://bridgecrew.io/platform/?utm_source=workshop.bridgecrew.io&utm_medium=workshop&utm_campaign=workshop"><i class="fas fa-tools"></i>Platform</a></li><li><a class=padding href="https://docs.bridgecrew.io?utm_source=workshop.bridgecrew.io&utm_medium=workshop&utm_campaign=workshop"><i class="far fa-lightbulb"></i>Docs</a></li><li><a class=padding href="https://bridgecrew.io/blog/?utm_source=workshop.bridgecrew.io&utm_medium=workshop&utm_campaign=workshop"><i class="fas fa-chalkboard-teacher"></i>Blog</a></li><li><a class=padding href="https://www.bridgecrew.cloud/login/signUp?utm_source=workshop.bridgecrew.io&utm_medium=workshop&utm_campaign=workshop"><i class="fas fa-chalkboard-teacher"></i> Sign up</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><a href=https://bridgecrew.io/privacy-policy/>Privacy</a> | <a href=https://bridgecrew.io/terms-of-use/>Site Terms</a> | © 2020, Bridgecrew, Inc. or its
affiliates. All rights reserved.</left></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span class=links><a href=/>Cloud DevSecOps with Bridgecrew</a> > <a href=/20_module_two.html>Module - Automate</a> > GitHub Actions</span></div></div></div><div id=head-tags></div><div id=chapter><div id=body-inner><h2 id=setting-up-github-actions-for-our-cloudformation-repository>Setting up GitHub Actions for our CloudFormation repository.</h2><p>If your existing CI/CD Pipeline runs in GitHub Actions, this can also be configured to scan the CloudFormation templates before deployment, allowing us to fail the build job and halt a deployment if there are any security violations in our CloudFormation code.</p><p>As with AWS CodeBuild, we’ll also automatically send the results to Brigecrew to maintain a view across all of our infrastructure projects and share visibility throughout our organization.</p><div class="notices info"><p>Generally speaking, you wouldn&rsquo;t configure both CI/CD solutions for a single repository, consider this page informational only if you have followed through the AWS CodeBuild and AWS CodeDeploy sections, the observability provided into the Bridgecrew platform will be similar.</p></div><p>As with other Integrations, the GitHub Actions CI/CD integration page at <a href=https://www.bridgecrew.cloud/integrations/githubActions target=_blank>https://www.bridgecrew.cloud/integrations/githubActions</a> allows us to setup GitHub Actions, select <strong>Add Subscription</strong>.</p><p><img src=./images/github_action_1.png alt="GitHub Action Integration in Bridgecrew" title="GitHub Action Integration in Bridgecrew"></p><p>The integration provides steps to enable GitHub actions, which we&rsquo;ll walk through below.</p><p><img src=./images/github_action_1a1.png alt="GitHub Action Integration in Bridgecrew" title="GitHub Action Integration in Bridgecrew"></p><p>Firstly, just like we stored the Bridgecrew API secret in <code>aws ssm put-parameter</code> for CodeBuild, allowing the CI/CD run to securely access the secret, we do the same with GitHub Actions, by creating a GitHub secret, this prevents our API key being exposed in the configuration (which is stored in our codebase).</p><p>Go to your <strong>fork of CFNGoat on GitHub</strong>, select <strong>Settings</strong></p><p><img src=./images/github_action_2.png alt="CFNGoat fork in GitHub" title="CFNGoat fork in GitHub"></p><p>Then select <strong>Secrets</strong> from the left, and click <strong>New Repository Secret</strong></p><p><img src=./images/github_action_3.png alt="CFNGoat fork in GitHub" title="CFNGoat fork in GitHub"></p><p>Name the secret <code>BRIDGECREW_API_KEY</code> as instructed in the Bridgecrew integration details above.</p><p>Copy and paste your API Token from the Bridgecrew integration details page into the <code>value</code> field.</p><p><img src=./images/github_action_4.png alt="CFNGoat repository secrets" title="CFNGoat repository secrets"></p><p>Select <strong>Add secret</strong>, the secret will then be listed by name in the <strong>Settings > Secrets</strong> page you&rsquo;ll be taken back too.</p><p><img src=./images/github_action_5.png alt="CFNGoat repository secrets" title="CFNGoat repository secrets"></p><h3 id=adding-the-automated-workflow>Adding the automated workflow.</h3><div class="notices info"><p>Github Actions are defined as <em>workflow</em> files, within your code repository under the <code>.github/workflows</code> directory. To create an action, we&rsquo;ll be adding a new file to this directory. If you already have workflows, and are familiar with the workflow file format, you could add the bridgecrew <code>step</code> section to your own workflows for the same results.</p></div><p>To create a new workflow, select <strong>Actions</strong> within your CFNGoat forked repository, then select <strong>New Workflow</strong> button.</p><p><img src=./images/github_action_6.png alt="Create new github action workflow" title="Create new github action workflow"></p><p>Select <strong>set up a workflow yourself</strong> to create a new, blank workflow.</p><p><strong>Name the new file</strong> <code>bridgecrew.yaml</code> and replace the entire contents with the workflow template provided below,
This takes the <code>jobs</code> section provided by the Bridgecrew integration instructions and wraps it in a fully functional GitHub Actions definition.</p><pre><code>name: Bridgecrew
on:
  push:
    branches:
      - master
jobs:
  scan:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: [3.8]
    steps:
    - uses: actions/checkout@v2
    - name: Run Bridgecrew 
      id: Bridgecrew
      uses: bridgecrewio/bridgecrew-action@master
      with:
        api-key: ${{ secrets.BRIDGECREW_API_KEY }}</code></pre><p>The result should look like this, select <strong>Start commit</strong></p><p><img src=./images/github_action_7.png alt="Save Github action workflow" title="Save Github action workflow"></p><p>Finally, save the new workflow file into your code repository by selecting <strong>Commit new file</strong></p><p><img src=./images/github_action_8.png alt="Save Github action workflow" title="Save Github action workflow"></p><p>The GitHub Action will immediatley start running the Bridgecrew CLI against the latest commit in your GFNGoat Repository.</p><p>You can see this by selecting the <strong>Actions</strong> page within your CFNGoat forked repository in GitHub.</p><p>You will see a new workflow, titled <em>Bridgecrew</em> and a job about to run automatically because of the new commit (of the workflow file)</p><p><img src=./images/github_action_10.png alt="Save Github action workflow" title="Save Github action workflow"></p><p>Selecting this <em>job</em> will allow you to view the status and logging output from the pipeline, where the Bridgecrew CLI will run and output any violations found in the CFNGoat codebase.</p><p><img src=./images/github_action_11.png alt="Github action workflow logs" title="Github action workflow logs"></p><p>Rather than digging through the job logs, the action also outputs annotations for each violation found into the <strong>Summary</strong> page of the action.</p><p><img src=./images/github_action_11.png alt="Github action workflow annotations" title="Github action workflow annotations"></p><div class="notices tip"><p>By default, the Bridgecrew GitHub Action is designed to pass, acting as a reporting and observability task, which updates the Bridgecrew dashboard of the current security posture within the CI/CD pipeline.</p></div><h2 id=congratulations>Congratulations!</h2><p>You’ve just automated security scanning of your infrastructure as code into a developer-friendly CI/CD pipeline.</p><p>In the next module, we’ll look at how to investigate and fix the issues arising from the automated scans, as well as providing more tips for integrating security into the developer workflow without causing friction.</p><footer class=footline></footer></div></div></div><div id=navigation><a class="nav nav-prev" href=/20_module_two/2005_automating_iac_results.html title="Pipeline Results"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/30_module_three.html title="Module - Fix" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1625063575></script><script src=/js/perfect-scrollbar.min.js?1625063575></script><script src=/js/perfect-scrollbar.jquery.min.js?1625063575></script><script src=/js/jquery.sticky.js?1625063575></script><script src=/js/featherlight.min.js?1625063575></script><script src=/js/highlight.pack.js?1625063575></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1625063575></script><script src=/js/learn.js?1625063575></script><script src=/js/hugo-learn.js?1625063575></script><script src=/mermaid/mermaid.js?1625063575></script><script>mermaid.initialize({startOnLoad:!0})</script></body></html>